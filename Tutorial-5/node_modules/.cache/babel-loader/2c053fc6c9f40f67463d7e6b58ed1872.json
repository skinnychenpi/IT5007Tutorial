{"ast":null,"code":"var _jsxFileName = \"/home/Assignment/IT5007Tutorial/Tutorial-5/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css'; // const initialEntries = [\n//     {\n//       serialNo: 1, name: 'Ravan', phoneNum: '123455', time: new Date().toLocaleTimeString(),\n//     },\n//     {\n//       serialNo: 2, name: 'Hofword', phoneNum: '123455', time: new Date().toLocaleTimeString(),\n//     },\n//   ];\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst limit = 20;\n\nfunction isNumber(value) {\n  var patrn = /^[0-9]*$/;\n\n  if (patrn.exec(value) === null || value === \"\") {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nclass DisplayFreeSlot extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"InfoHub\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Current available seats in WL:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"waitingListLoad\",\n        children: [\" \", this.props.data, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass AddCustomer extends React.Component {\n  constructor() {\n    super();\n    this.addHandler = this.addHandler.bind(this);\n  }\n\n  addHandler(e) {\n    e.preventDefault();\n    var guestName = this.refs.guestNameToAdd;\n    var guestPhNum = this.refs.guestPhNumToAdd;\n\n    if (guestName.value === \"\") {\n      alert(\"The user name can't be empty!\");\n      return;\n    }\n\n    if (!isNumber(String(guestPhNum.value))) {\n      alert(\"Please enter valid phone number!\");\n      return;\n    }\n\n    const entry = {\n      name: String(guestName.value),\n      phNum: Number(guestPhNum.value)\n    };\n    this.props.createEntry(entry);\n    guestName.value = \"\";\n    guestPhNum.value = \"\";\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AddToWL\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \" Enter the guest name: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ref: \"guestNameToAdd\",\n        id: \"guestNameToAdd\",\n        className: \"guestNameToAdd\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Enter the guest phone number: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ref: \"guestPhNumToAdd\",\n        id: \"guestPhNumToAdd\",\n        className: \"guestPhNumToAdd\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submitAdd\",\n        onClick: this.addHandler,\n        children: \"Add to Waiting List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass DeleteCustomer extends React.Component {\n  constructor() {\n    super();\n    this.deleteHandler = this.deleteHandler.bind(this);\n  }\n\n  deleteHandler(e) {\n    e.preventDefault();\n    this.props.deleteEntry();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"RemoveFromWL\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Remove the guest from the Waiting List: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submitRemove\",\n        onClick: this.deleteHandler,\n        children: \"Remove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass DisplayCustomer extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"DisplayTable\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.props.pageController(true),\n        children: \"Show WL Table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass WLTableRow extends React.Component {\n  render() {\n    const entry = this.props.entry;\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\" \", entry.serial, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\" \", entry.name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\" \", entry.phNum, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [\" \", entry.time, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass WLTable extends React.Component {\n  render() {\n    const entryRows = this.props.data.map(entry => /*#__PURE__*/_jsxDEV(WLTableRow, {\n      entry: entry\n    }, entry.serial, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 56\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"WLtable\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Serial No.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Time Stamp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          id: \"myTbody\",\n          children: entryRows\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass DisplayHomePage extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"BackToHomepage\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.props.pageController(false),\n        children: \"Back to homepage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass WebPage extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      WL: [],\n      freeSeats: limit,\n      isDetailShowed: false\n    };\n    this.createEntry = this.createEntry.bind(this);\n    this.deleteEntry = this.deleteEntry.bind(this);\n    this.pageController = this.pageController.bind(this);\n  } // Integrate Read API:\n\n\n  async loadData() {\n    const query = `query {\n          guestList {\n            serial name phNum time\n          }\n        }`;\n    const response = await fetch('http://localhost:5000/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        query\n      })\n    });\n    const result = await response.json();\n    this.setState({\n      WL: result.data.guestList\n    });\n  }\n\n  async createEntry(entry) {\n    const query = `mutation {\n          guestAdd(guest:{\n            name: \"${entry.name}\",\n            phNum: N${entry.phNum},\n          }) {\n            serial name phNum time\n          }\n        }`;\n    const response = await fetch('http://localhost:5000/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        query\n      })\n    });\n    this.loadData();\n  } // createEntry(entry) {\n  //     var currentFree = this.state.freeSeats;\n  //     if (currentFree === 0) {\n  //         alert(\"The waiting list is already full!\");\n  //         return;\n  //     }\n  //     this.setState({freeSeats : --currentFree});\n  //     entry.serialNo = this.state.WL.length + 1;\n  //     entry.time = new Date().toLocaleTimeString();\n  //     var newWL = this.state.WL.slice();\n  //     newWL.push(entry);\n  //     this.setState({WL: newWL}); \n  // }\n\n\n  deleteEntry() {\n    var currentFree = this.state.freeSeats;\n\n    if (currentFree === 20) {\n      alert(\"The waiting list is empty!\");\n      return;\n    }\n\n    this.setState({\n      freeSeats: ++currentFree\n    });\n    var newWL = this.state.WL.slice();\n    newWL.shift();\n\n    for (var i = 0; i < newWL.length; i++) {\n      newWL[i].serialNo--;\n    }\n\n    this.setState({\n      WL: newWL\n    });\n  }\n\n  pageController(logic) {\n    this.setState({\n      isDetailShowed: logic\n    });\n  }\n\n  render() {\n    var homePage = /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(DisplayFreeSlot, {\n        data: this.state.freeSeats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(AddCustomer, {\n        createEntry: this.createEntry\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DeleteCustomer, {\n        deleteEntry: this.deleteEntry\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DisplayCustomer, {\n        pageController: this.pageController\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 24\n    }, this);\n\n    var detailPage = /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(WLTable, {\n        data: this.state.WL\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 42\n      }, this), /*#__PURE__*/_jsxDEV(DisplayHomePage, {\n        pageController: this.pageController\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 75\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 26\n    }, this);\n\n    var pageToRender = this.state.isDetailShowed ? detailPage : homePage;\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"California Hotel Reservation Waiting List System\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }, this), pageToRender]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }, this);\n  }\n\n} // ========================================\n\n\nReactDOM.render( /*#__PURE__*/_jsxDEV(WebPage, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 258,\n  columnNumber: 1\n}, this), document.getElementById('root'));","map":{"version":3,"sources":["/home/Assignment/IT5007Tutorial/Tutorial-5/src/index.js"],"names":["React","ReactDOM","limit","isNumber","value","patrn","exec","DisplayFreeSlot","Component","render","props","data","AddCustomer","constructor","addHandler","bind","e","preventDefault","guestName","refs","guestNameToAdd","guestPhNum","guestPhNumToAdd","alert","String","entry","name","phNum","Number","createEntry","DeleteCustomer","deleteHandler","deleteEntry","DisplayCustomer","pageController","WLTableRow","serial","time","WLTable","entryRows","map","DisplayHomePage","WebPage","state","WL","freeSeats","isDetailShowed","loadData","query","response","fetch","method","headers","body","JSON","stringify","result","json","setState","guestList","currentFree","newWL","slice","shift","i","length","serialNo","logic","homePage","detailPage","pageToRender","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,aAAP,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMC,KAAK,GAAG,EAAd;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACrB,MAAIC,KAAK,GAAG,UAAZ;;AACA,MAAIA,KAAK,CAACC,IAAN,CAAWF,KAAX,MAAsB,IAAtB,IAA8BA,KAAK,KAAK,EAA5C,EAAgD;AAC5C,WAAO,KAAP;AACJ,GAFA,MAEM;AACF,WAAO,IAAP;AACJ;AACH;;AAED,MAAMG,eAAN,SAA8BP,KAAK,CAACQ,SAApC,CAA8C;AAC1CC,EAAAA,MAAM,GAAG;AACL,wBACA;AAAK,MAAA,SAAS,EAAG,SAAjB;AAAA,8BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAO,QAAA,SAAS,EAAG,iBAAnB;AAAA,wBAAuC,KAAKC,KAAL,CAAWC,IAAlD;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAMH;;AARyC;;AAW9C,MAAMC,WAAN,SAA0BZ,KAAK,CAACQ,SAAhC,CAA0C;AACtCK,EAAAA,WAAW,GAAG;AACV;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACH;;AAEDD,EAAAA,UAAU,CAACE,CAAD,EAAI;AACVA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,SAAS,GAAG,KAAKC,IAAL,CAAUC,cAA1B;AACA,QAAIC,UAAU,GAAG,KAAKF,IAAL,CAAUG,eAA3B;;AAEA,QAAIJ,SAAS,CAACd,KAAV,KAAoB,EAAxB,EAA4B;AACxBmB,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACA;AACH;;AAED,QAAI,CAACpB,QAAQ,CAACqB,MAAM,CAACH,UAAU,CAACjB,KAAZ,CAAP,CAAb,EAAyC;AACrCmB,MAAAA,KAAK,CAAC,kCAAD,CAAL;AACA;AACH;;AAED,UAAME,KAAK,GAAG;AAACC,MAAAA,IAAI,EAAEF,MAAM,CAACN,SAAS,CAACd,KAAX,CAAb;AAAgCuB,MAAAA,KAAK,EAAEC,MAAM,CAACP,UAAU,CAACjB,KAAZ;AAA7C,KAAd;AACA,SAAKM,KAAL,CAAWmB,WAAX,CAAuBJ,KAAvB;AACAP,IAAAA,SAAS,CAACd,KAAV,GAAkB,EAAlB;AACAiB,IAAAA,UAAU,CAACjB,KAAX,GAAmB,EAAnB;AACH;;AAEDK,EAAAA,MAAM,GAAG;AACL,wBACA;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,GAAG,EAAG,gBAAzB;AAA0C,QAAA,EAAE,EAAC,gBAA7C;AAA8D,QAAA,SAAS,EAAC;AAAxE;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ,eAKI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,GAAG,EAAG,iBAAzB;AAA2C,QAAA,EAAE,EAAC,iBAA9C;AAAgE,QAAA,SAAS,EAAC;AAA1E;AAAA;AAAA;AAAA;AAAA,cALJ,eAMI;AAAQ,QAAA,SAAS,EAAG,WAApB;AAAgC,QAAA,OAAO,EAAI,KAAKK,UAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAUH;;AAtCqC;;AAyC1C,MAAMgB,cAAN,SAA6B9B,KAAK,CAACQ,SAAnC,CAA6C;AACzCK,EAAAA,WAAW,GAAG;AACV;AACA,SAAKkB,aAAL,GAAqB,KAAKA,aAAL,CAAmBhB,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAEDgB,EAAAA,aAAa,CAACf,CAAD,EAAI;AACbA,IAAAA,CAAC,CAACC,cAAF;AACA,SAAKP,KAAL,CAAWsB,WAAX;AACH;;AAEDvB,EAAAA,MAAM,GAAG;AACL,wBACA;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAQ,QAAA,SAAS,EAAG,cAApB;AAAmC,QAAA,OAAO,EAAI,KAAKsB,aAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAMH;;AAlBwC;;AAqB7C,MAAME,eAAN,SAA8BjC,KAAK,CAACQ,SAApC,CAA8C;AAC1CC,EAAAA,MAAM,GAAG;AACL,wBACA;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,6BACA;AAAQ,QAAA,OAAO,EAAI,MAAM,KAAKC,KAAL,CAAWwB,cAAX,CAA0B,IAA1B,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,YADA;AAKH;;AAPyC;;AAU9C,MAAMC,UAAN,SAAyBnC,KAAK,CAACQ,SAA/B,CAAyC;AACrCC,EAAAA,MAAM,GAAG;AACL,UAAMgB,KAAK,GAAG,KAAKf,KAAL,CAAWe,KAAzB;AACA,wBACA;AAAA,8BACI;AAAA,wBAAMA,KAAK,CAACW,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,wBAAMX,KAAK,CAACC,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAA,wBAAMD,KAAK,CAACE,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAA,wBAAMF,KAAK,CAACY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAQH;;AAXoC;;AAczC,MAAMC,OAAN,SAAsBtC,KAAK,CAACQ,SAA5B,CAAsC;AAClCC,EAAAA,MAAM,GAAG;AACL,UAAM8B,SAAS,GAAG,KAAK7B,KAAL,CAAWC,IAAX,CAAgB6B,GAAhB,CAAoBf,KAAK,iBAAI,QAAC,UAAD;AAA+B,MAAA,KAAK,EAAEA;AAAtC,OAAiBA,KAAK,CAACW,MAAvB;AAAA;AAAA;AAAA;AAAA,YAA7B,CAAlB;AAEA,wBACA;AAAK,MAAA,SAAS,EAAG,SAAjB;AAAA,6BACI;AAAA,gCACI;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAOI;AAAO,UAAA,EAAE,EAAG,SAAZ;AAAA,oBACKG;AADL;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADA;AAeH;;AAnBiC;;AAsBtC,MAAME,eAAN,SAA8BzC,KAAK,CAACQ,SAApC,CAA8C;AAC1CC,EAAAA,MAAM,GAAG;AACL,wBACA;AAAK,MAAA,SAAS,EAAG,gBAAjB;AAAA,6BACI;AAAQ,QAAA,OAAO,EAAI,MAAM,KAAKC,KAAL,CAAWwB,cAAX,CAA0B,KAA1B,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADA;AAKH;;AAPyC;;AAU9C,MAAMQ,OAAN,SAAsB1C,KAAK,CAACQ,SAA5B,CAAsC;AAClCK,EAAAA,WAAW,GAAG;AACV;AACA,SAAK8B,KAAL,GAAa;AAACC,MAAAA,EAAE,EAAE,EAAL;AAAQC,MAAAA,SAAS,EAAG3C,KAApB;AAA2B4C,MAAAA,cAAc,EAAG;AAA5C,KAAb;AACA,SAAKjB,WAAL,GAAmB,KAAKA,WAAL,CAAiBd,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKiB,WAAL,GAAmB,KAAKA,WAAL,CAAiBjB,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKmB,cAAL,GAAsB,KAAKA,cAAL,CAAoBnB,IAApB,CAAyB,IAAzB,CAAtB;AACH,GAPiC,CASlC;;;AACc,QAARgC,QAAQ,GAAG;AACb,UAAMC,KAAK,GAAI;AACvB;AACA;AACA;AACA,UAJQ;AAMA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,+BAAD,EAAkC;AAC1DC,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFiD;AAG1DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,QAAAA;AAAF,OAAf;AAHoD,KAAlC,CAA5B;AAMA,UAAMQ,MAAM,GAAG,MAAMP,QAAQ,CAACQ,IAAT,EAArB;AACA,SAAKC,QAAL,CAAc;AAAEd,MAAAA,EAAE,EAAEY,MAAM,CAAC7C,IAAP,CAAYgD;AAAlB,KAAd;AACH;;AAEgB,QAAX9B,WAAW,CAACJ,KAAD,EAAQ;AACrB,UAAMuB,KAAK,GAAI;AACvB;AACA,qBAAqBvB,KAAK,CAACC,IAAK;AAChC,sBAAsBD,KAAK,CAACE,KAAM;AAClC;AACA;AACA;AACA,UAPQ;AASA,UAAMsB,QAAQ,GAAG,MAAMC,KAAK,CAAC,+BAAD,EAAkC;AAC5DC,MAAAA,MAAM,EAAE,MADoD;AAE5DC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFmD;AAG5DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,QAAAA;AAAF,OAAf;AAHsD,KAAlC,CAA5B;AAKA,SAAKD,QAAL;AACD,GA3C+B,CA8ClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAf,EAAAA,WAAW,GAAG;AACV,QAAI4B,WAAW,GAAG,KAAKjB,KAAL,CAAWE,SAA7B;;AACA,QAAIe,WAAW,KAAK,EAApB,EAAwB;AACpBrC,MAAAA,KAAK,CAAC,4BAAD,CAAL;AACA;AACH;;AACD,SAAKmC,QAAL,CAAc;AAACb,MAAAA,SAAS,EAAG,EAAEe;AAAf,KAAd;AAEA,QAAIC,KAAK,GAAG,KAAKlB,KAAL,CAAWC,EAAX,CAAckB,KAAd,EAAZ;AACAD,IAAAA,KAAK,CAACE,KAAN;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnCH,MAAAA,KAAK,CAACG,CAAD,CAAL,CAASE,QAAT;AACH;;AACD,SAAKR,QAAL,CAAc;AAACd,MAAAA,EAAE,EAAEiB;AAAL,KAAd;AACH;;AAED3B,EAAAA,cAAc,CAACiC,KAAD,EAAQ;AAClB,SAAKT,QAAL,CAAc;AAACZ,MAAAA,cAAc,EAAGqB;AAAlB,KAAd;AACH;;AAED1D,EAAAA,MAAM,GAAG;AAEL,QAAI2D,QAAQ,gBAAG,QAAC,KAAD,CAAO,QAAP;AAAA,8BAAgB,QAAC,eAAD;AAAiB,QAAA,IAAI,EAAI,KAAKzB,KAAL,CAAWE;AAApC;AAAA;AAAA;AAAA;AAAA,cAAhB,eACf,QAAC,WAAD;AAAa,QAAA,WAAW,EAAI,KAAKhB;AAAjC;AAAA;AAAA;AAAA;AAAA,cADe,eAEf,QAAC,cAAD;AAAgB,QAAA,WAAW,EAAI,KAAKG;AAApC;AAAA;AAAA;AAAA;AAAA,cAFe,eAGf,QAAC,eAAD;AAAiB,QAAA,cAAc,EAAI,KAAKE;AAAxC;AAAA;AAAA;AAAA;AAAA,cAHe;AAAA;AAAA;AAAA;AAAA;AAAA,YAAf;;AAKA,QAAImC,UAAU,gBAAG,QAAC,KAAD,CAAO,QAAP;AAAA,8BAAgB,QAAC,OAAD;AAAS,QAAA,IAAI,EAAI,KAAK1B,KAAL,CAAWC;AAA5B;AAAA;AAAA;AAAA;AAAA,cAAhB,eAAiD,QAAC,eAAD;AAAiB,QAAA,cAAc,EAAI,KAAKV;AAAxC;AAAA;AAAA;AAAA;AAAA,cAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,YAAjB;;AAEA,QAAIoC,YAAY,GAAI,KAAK3B,KAAL,CAAWG,cAAZ,GAA8BuB,UAA9B,GAA2CD,QAA9D;AAEA,wBACA,QAAC,KAAD,CAAO,QAAP;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEKE,YAFL;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAMH;;AAjGiC,C,CAqGtC;;;AAEArE,QAAQ,CAACQ,MAAT,eACA,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,QADA,EAEA8D,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAFA","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\n\n// const initialEntries = [\n//     {\n//       serialNo: 1, name: 'Ravan', phoneNum: '123455', time: new Date().toLocaleTimeString(),\n//     },\n//     {\n//       serialNo: 2, name: 'Hofword', phoneNum: '123455', time: new Date().toLocaleTimeString(),\n//     },\n//   ];\n\nconst limit = 20;\n\nfunction isNumber(value) {\n    var patrn = /^[0-9]*$/;\n    if (patrn.exec(value) === null || value === \"\") {\n        return false;\n   } else {\n        return true;\n   }\n}\n\nclass DisplayFreeSlot extends React.Component {\n    render() {\n        return (\n        <div className = \"InfoHub\">\n        <label>Current available seats in WL:</label>\n        <label className = \"waitingListLoad\"> {this.props.data} </label>\n        </div>\n        );\n    }\n  }\n\nclass AddCustomer extends React.Component {\n    constructor() {\n        super();\n        this.addHandler = this.addHandler.bind(this);\n    }\n\n    addHandler(e) {\n        e.preventDefault();\n        var guestName = this.refs.guestNameToAdd;\n        var guestPhNum = this.refs.guestPhNumToAdd;\n        \n        if (guestName.value === \"\") {\n            alert(\"The user name can't be empty!\");\n            return;\n        }\n        \n        if (!isNumber(String(guestPhNum.value))) {\n            alert(\"Please enter valid phone number!\");\n            return;\n        }\n\n        const entry = {name: String(guestName.value), phNum: Number(guestPhNum.value)};\n        this.props.createEntry(entry);\n        guestName.value = \"\";\n        guestPhNum.value = \"\";\n    }\n\n    render() {\n        return (\n        <div className=\"AddToWL\">\n            <label> Enter the guest name: </label>\n            <input type=\"text\" ref = \"guestNameToAdd\" id=\"guestNameToAdd\" className=\"guestNameToAdd\"></input>\n            <br></br>\n            <label>Enter the guest phone number: </label>\n            <input type=\"text\" ref = \"guestPhNumToAdd\" id=\"guestPhNumToAdd\" className=\"guestPhNumToAdd\"></input>\n            <button className = \"submitAdd\" onClick = {this.addHandler}>Add to Waiting List</button>\n        </div>\n        );\n    }\n}\n\nclass DeleteCustomer extends React.Component {\n    constructor() {\n        super();\n        this.deleteHandler = this.deleteHandler.bind(this);\n    }\n\n    deleteHandler(e) {\n        e.preventDefault();\n        this.props.deleteEntry();\n    }\n\n    render() {\n        return (\n        <div className=\"RemoveFromWL\">\n            <label>Remove the guest from the Waiting List: </label>\n            <button className = \"submitRemove\" onClick = {this.deleteHandler}>Remove</button>\n        </div>\n        );\n    }\n}\n\nclass DisplayCustomer extends React.Component {\n    render() {\n        return (\n        <div className=\"DisplayTable\">\n        <button onClick = {() => this.props.pageController(true)}>Show WL Table</button>\n        </div>\n        );\n    }\n}\n\nclass WLTableRow extends React.Component {\n    render() {\n        const entry = this.props.entry;\n        return (\n        <tr>\n            <td> {entry.serial} </td>\n            <td> {entry.name} </td>\n            <td> {entry.phNum} </td>\n            <td> {entry.time} </td>\n        </tr>\n    );\n    }\n}\n\nclass WLTable extends React.Component {\n    render() {\n        const entryRows = this.props.data.map(entry => <WLTableRow key={entry.serial} entry={entry} /> );\n\n        return (\n        <div className = \"WLtable\">\n            <table>\n                <thead>\n                    <th>Serial No.</th>\n                    <th>Name</th>\n                    <th>Phone Number</th>\n                    <th>Time Stamp</th>\n                </thead>\n                <tbody id = \"myTbody\">\n                    {entryRows}\n                </tbody>\n            </table>\n        </div>\n        );\n    }\n}\n\nclass DisplayHomePage extends React.Component {\n    render() {\n        return (\n        <div className = \"BackToHomepage\">\n            <button onClick = {() => this.props.pageController(false)}>Back to homepage</button>\n        </div>\n        );\n    }\n}\n\nclass WebPage extends React.Component {\n    constructor() {\n        super();\n        this.state = {WL: [],freeSeats : limit, isDetailShowed : false};\n        this.createEntry = this.createEntry.bind(this);\n        this.deleteEntry = this.deleteEntry.bind(this);\n        this.pageController = this.pageController.bind(this);\n    }\n\n    // Integrate Read API:\n    async loadData() {\n        const query = `query {\n          guestList {\n            serial name phNum time\n          }\n        }`;\n    \n        const response = await fetch('http://localhost:5000/graphql', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json'},\n            body: JSON.stringify({ query })\n        });\n\n        const result = await response.json();\n        this.setState({ WL: result.data.guestList });\n    }\n\n    async createEntry(entry) {\n        const query = `mutation {\n          guestAdd(guest:{\n            name: \"${entry.name}\",\n            phNum: N${entry.phNum},\n          }) {\n            serial name phNum time\n          }\n        }`;\n    \n        const response = await fetch('http://localhost:5000/graphql', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json'},\n          body: JSON.stringify({ query })\n        });\n        this.loadData();\n      }\n\n\n    // createEntry(entry) {\n    //     var currentFree = this.state.freeSeats;\n    //     if (currentFree === 0) {\n    //         alert(\"The waiting list is already full!\");\n    //         return;\n    //     }\n    //     this.setState({freeSeats : --currentFree});\n    //     entry.serialNo = this.state.WL.length + 1;\n    //     entry.time = new Date().toLocaleTimeString();\n    //     var newWL = this.state.WL.slice();\n    //     newWL.push(entry);\n    //     this.setState({WL: newWL}); \n    // }\n\n    deleteEntry() {\n        var currentFree = this.state.freeSeats;\n        if (currentFree === 20) {\n            alert(\"The waiting list is empty!\");\n            return;\n        }\n        this.setState({freeSeats : ++currentFree});\n\n        var newWL = this.state.WL.slice();\n        newWL.shift();\n        for (var i = 0; i < newWL.length; i++) {\n            newWL[i].serialNo--;\n        }\n        this.setState({WL: newWL});\n    }\n\n    pageController(logic) {\n        this.setState({isDetailShowed : logic});\n    }\n\n    render() {\n\n        var homePage = <React.Fragment><DisplayFreeSlot data = {this.state.freeSeats}/>\n        <AddCustomer createEntry = {this.createEntry}/>\n        <DeleteCustomer deleteEntry = {this.deleteEntry}/>\n        <DisplayCustomer pageController = {this.pageController}/></React.Fragment>;\n\n        var detailPage = <React.Fragment><WLTable data = {this.state.WL}/><DisplayHomePage pageController = {this.pageController}/></React.Fragment>;\n\n        var pageToRender = (this.state.isDetailShowed) ? detailPage : homePage;\n\n        return (\n        <React.Fragment>\n            <h1>California Hotel Reservation Waiting List System</h1>\n            {pageToRender}\n        </React.Fragment>\n        );\n    }\n}\n\n\n// ========================================\n\nReactDOM.render(\n<WebPage />,\ndocument.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}